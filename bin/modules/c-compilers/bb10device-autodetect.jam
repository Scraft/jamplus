BLACKBERRY_NATIVE_ENV_BATCH_FILE = ;
BLACKBERRY_NDK_DIR = ;

rule C.AutoDetect 
{
	if ! $(BB10NDK)
	{
		return ;
	}
	
	BB10NDK = $(BB10NDK:J=" ") ;
	
	BLACKBERRY_NATIVE_ENV_BATCH_FILE = [ Glob $(BB10NDK) : bbndk-env.bat ] ;
	if ! $(BLACKBERRY_NATIVE_ENV_BATCH_FILE)
	{
		return ;
	}
	else
	{
		BLACKBERRY_NDK_DIR = $(BB10NDK:TC\\) ;
		BLACKBERRY_NATIVE_ENV_BATCH_FILE = $(BLACKBERRY_NATIVE_ENV_BATCH_FILE:J=" ") ;
		BLACKBERRY_NATIVE_ENV_BATCH_FILE = $(BLACKBERRY_NATIVE_ENV_BATCH_FILE:TC\\) ;
	}
	
	COMPILER.$(PLATFORM) = bb10device ;

	# Use generic gcc module.
	UseModule c-compilers/c-gcc ;
	
	if $(PLATFORM) != *  &&  $(CONFIG) != * 
	{
		UseModule c-compilers/blackberry-gcc ;
	}
	
	return $(COMPILER.$(PLATFORM)) ;
}
