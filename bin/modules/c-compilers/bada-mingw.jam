C.AR		?= "$(BADA_SDK_HOME)\\Tools\\Toolchains\\ARM\\bin\\arm-samsung-nucleuseabi-ar" ru ;
C.CC		?= "$(BADA_SDK_HOME)\\Tools\\Toolchains\\ARM\\bin\\arm-samsung-nucleuseabi-gcc" ;
C.C++		?= "$(BADA_SDK_HOME)\\Tools\\Toolchains\\ARM\\bin\\arm-samsung-nucleuseabi-g++.exe" ;
C.LINK		?= "$(BADA_SDK_HOME)\\Tools\\Toolchains\\ARM\\bin\\arm-samsung-nucleuseabi-g++.exe" ;
C.RANLIB	?= "$(BADA_SDK_HOME)\\Tools\\Toolchains\\ARM\\bin\\arm-samsung-nucleuseabi-ranlib.exe" ;

######################################################################################################################

rule C.FDefines { return -D$(<) ; }
rule C.FIncludes { return -I\"$(<)\" ; }
rule C.FLibraryPaths { return -L\"$(<)\" ; } 

######################################################################################################################

if $(PLATFORM) != bada1 && $(PLATFORM) != bada2
{
	Exit *** Error \: Expected PLATFORM to be bada1 or bada2 not $(PLATFORM) ;
}

######################################################################################################################

# -------------------------------------------------------------------------------------
# Defines
# -------------------------------------------------------------------------------------
# Generic
# -------------------------------------------------------------------------------------

C.Defines *	: 
	_BADA 
	SHP 
	BUILD_DLL 
	EA_PLATFORM_BADA
	TCHAR=char
	;
	
C.Defines * : _BADA1_SDK : * : bada1 ;
C.Defines * : _BADA2_SDK : * : bada2 ;
	
# -------------------------------------------------------------------------------------
# Debug
# -------------------------------------------------------------------------------------

C.Defines * : 
	_DEBUG 
: debug ;

# -------------------------------------------------------------------------------------
# Compiler flags
# -------------------------------------------------------------------------------------

local _compilerFlags =
	-Wno-deprecated
	-g 
	-fpic
	-march=armv7-a 
	-mthumb 
	-mthumb-interwork 
	-mfpu=vfpv3 
	-mfloat-abi=hard
#	-Wall 
	-fmessage-length=0
	-Wno-psabi	# Get rid of the mangling of 'va_list' has changed in GCC 4.4
	-fsigned-char
	-fshort-wchar
	;
	
if $(CONFIG) = debug
{
	_compilerFlags += -O0 ;
}
else
{
	_compilerFlags += -Os ;
}

C.CFlags *		: $(_compilerFlags) ;
C.C++Flags *	: $(_compilerFlags) ;

# -------------------------------------------------------------------------------------
# Include directories
# -------------------------------------------------------------------------------------

C.IncludeDirectories * : 
	$(BADA_SDK_HOME)/include 
	;

# -------------------------------------------------------------------------------------
# C.LinkDirectories
# -------------------------------------------------------------------------------------

if $(PLATFORM) = bada1
{
	BADA_MODEL = Wave_LP1 ;
}
else if $(PLATFORM) = bada2
{
	BADA_MODEL = WaveWVGA ;
}

C.LinkDirectories * :
	$(BADA_SDK_HOME)/Model/$(BADA_MODEL)/Target
	;

# -------------------------------------------------------------------------------------
# LinkPrebuiltLibraries
# -------------------------------------------------------------------------------------

C.LinkPrebuiltLibraries * :
	$(BADA_SDK_HOME)/Model/$(BADA_MODEL)/Target/osp_rt0.a 
	$(BADA_SDK_HOME)/Model/$(BADA_MODEL)/Target/FOsp.so 
	$(BADA_SDK_HOME)/Model/$(BADA_MODEL)/Target/FGraphicsOpengl.so 
	$(BADA_SDK_HOME)/Model/$(BADA_MODEL)/Target/FGraphicsEgl.so 
	$(BADA_SDK_HOME)/Model/$(BADA_MODEL)/Target/StubDynCast.so 
	;

# -------------------------------------------------------------------------------------
# LinkFlags
# -------------------------------------------------------------------------------------
# Generic
# -------------------------------------------------------------------------------------

C.LinkFlags * :
#	--enable-auto-import
	-shared 
	-Wl,--no-undefined
	-march=armv7-a 
	-mthumb 
	-mthumb-interwork 
	-mfpu=vfpv3 
	-mfloat-abi=hard
	-fsigned-char
	;

# -------------------------------------------------------------------------------------
# Misc
# -------------------------------------------------------------------------------------
# Generic
# -------------------------------------------------------------------------------------

VSPLATFORMMAP.bada1 = "Bada SDK 1" ;
VSPLATFORMMAP.bada2 = "Bada SDK 2" ;
