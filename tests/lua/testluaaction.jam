actions lua RunLuaScript
{
	require 'ex'; os.sleep($(SLEEP)); print([[$(TEXT)]])
}

rule DoLua TARGET : SOURCES : SLEEP : TEXT
{
	Depends all : $(TARGET) ;
	Always $(TARGET) ;
	SLEEP on $(TARGET) = $(SLEEP) ;
	TEXT on $(TARGET) = $(TEXT) ;
	RunLuaScript $(TARGET) : $(SOURCES) ;
}

DoLua MyTarget.out : xUnit.h : 5 : hello ;
DoLua MyTarget.out2 : xUnit2.h : 2.5 : hi ;
DoLua MyTarget.out3 : xUnit3.h : 1 : together ;
